<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Array Flattening Explained - Why Brackets Matter</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0f0f1a;
            --bg-card: #1a1a2e;
            --bg-code: #12121f;
            --text-primary: #ffffff;
            --text-secondary: #a0a0c0;
            --text-muted: #6b6b8a;
            
            /* Vibrant colors */
            --amber: #fbbf24;
            --amber-glow: rgba(251, 191, 36, 0.3);
            --orange: #fb923c;
            --rose: #fb7185;
            --rose-glow: rgba(251, 113, 133, 0.3);
            --emerald: #34d399;
            --emerald-glow: rgba(52, 211, 153, 0.3);
            --cyan: #22d3ee;
            --cyan-glow: rgba(34, 211, 238, 0.3);
            --violet: #a78bfa;
            --violet-glow: rgba(167, 139, 250, 0.3);
            --fuchsia: #e879f9;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.7;
            min-height: 100vh;
            background-image: 
                radial-gradient(ellipse at 20% 0%, rgba(167, 139, 250, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 100%, rgba(34, 211, 238, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(251, 191, 36, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.9) 0%, rgba(15, 15, 26, 0.9) 100%);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .logo {
            width: 72px;
            height: 72px;
            background: linear-gradient(135deg, var(--amber) 0%, var(--orange) 50%, var(--rose) 100%);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            box-shadow: 0 10px 40px var(--amber-glow);
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        h1 {
            font-size: 2.75rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--amber) 0%, var(--orange) 50%, var(--rose) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.15rem;
            margin-top: 0.25rem;
        }

        /* Section Styling */
        section {
            padding: 4rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        h2 {
            font-size: 2.25rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        h2 .icon {
            font-size: 2.5rem;
        }

        h2.amber { background: linear-gradient(135deg, var(--amber), var(--orange)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        h2.rose { background: linear-gradient(135deg, var(--rose), var(--fuchsia)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        h2.emerald { background: linear-gradient(135deg, var(--emerald), var(--cyan)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        h2.cyan { background: linear-gradient(135deg, var(--cyan), var(--violet)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        h2.violet { background: linear-gradient(135deg, var(--violet), var(--fuchsia)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 2.5rem 0 1rem;
            color: var(--text-primary);
        }

        p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 2rem;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .card.gradient-amber {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1) 0%, rgba(251, 146, 60, 0.1) 100%);
            border-color: rgba(251, 191, 36, 0.3);
        }

        .card.gradient-rose {
            background: linear-gradient(135deg, rgba(251, 113, 133, 0.1) 0%, rgba(232, 121, 249, 0.1) 100%);
            border-color: rgba(251, 113, 133, 0.3);
        }

        .card.gradient-emerald {
            background: linear-gradient(135deg, rgba(52, 211, 153, 0.1) 0%, rgba(34, 211, 238, 0.1) 100%);
            border-color: rgba(52, 211, 153, 0.3);
        }

        .card.gradient-violet {
            background: linear-gradient(135deg, rgba(167, 139, 250, 0.1) 0%, rgba(232, 121, 249, 0.1) 100%);
            border-color: rgba(167, 139, 250, 0.3);
        }

        /* Code */
        pre, code {
            font-family: 'JetBrains Mono', monospace;
        }

        code {
            background: var(--bg-code);
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            font-size: 0.9em;
            color: var(--amber);
        }

        pre {
            background: var(--bg-code);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.5rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        pre code {
            background: none;
            padding: 0;
            color: var(--text-primary);
        }

        /* Grid */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }

        @media (max-width: 1024px) {
            .grid-2, .grid-3, .grid-4 {
                grid-template-columns: 1fr;
            }
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.4rem 1rem;
            border-radius: 100px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .badge.amber { background: linear-gradient(135deg, var(--amber), var(--orange)); color: #000; }
        .badge.rose { background: linear-gradient(135deg, var(--rose), var(--fuchsia)); color: #000; }
        .badge.emerald { background: linear-gradient(135deg, var(--emerald), var(--cyan)); color: #000; }
        .badge.violet { background: linear-gradient(135deg, var(--violet), var(--fuchsia)); color: #000; }

        /* Alert boxes */
        .alert {
            padding: 1.5rem 2rem;
            border-radius: 20px;
            margin: 2rem 0;
            display: flex;
            gap: 1.25rem;
            align-items: flex-start;
        }

        .alert.warning {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(251, 146, 60, 0.15) 100%);
            border: 2px solid rgba(251, 191, 36, 0.4);
        }

        .alert.danger {
            background: linear-gradient(135deg, rgba(251, 113, 133, 0.15) 0%, rgba(239, 68, 68, 0.15) 100%);
            border: 2px solid rgba(251, 113, 133, 0.4);
        }

        .alert.success {
            background: linear-gradient(135deg, rgba(52, 211, 153, 0.15) 0%, rgba(34, 211, 238, 0.15) 100%);
            border: 2px solid rgba(52, 211, 153, 0.4);
        }

        .alert-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }

        .alert-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .alert.warning .alert-title { color: var(--amber); }
        .alert.danger .alert-title { color: var(--rose); }
        .alert.success .alert-title { color: var(--emerald); }

        /* Comparison boxes */
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }

        .comparison-box {
            border-radius: 20px;
            padding: 2rem;
            border: 2px solid;
        }

        .comparison-box.correct {
            background: linear-gradient(135deg, rgba(52, 211, 153, 0.1) 0%, rgba(34, 211, 238, 0.05) 100%);
            border-color: var(--emerald);
        }

        .comparison-box.wrong {
            background: linear-gradient(135deg, rgba(251, 113, 133, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%);
            border-color: var(--rose);
        }

        .comparison-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .comparison-box.correct .comparison-header { color: var(--emerald); }
        .comparison-box.wrong .comparison-header { color: var(--rose); }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            border-radius: 16px;
            overflow: hidden;
        }

        th, td {
            padding: 1rem 1.25rem;
            text-align: left;
        }

        th {
            background: linear-gradient(135deg, rgba(167, 139, 250, 0.2) 0%, rgba(34, 211, 238, 0.2) 100%);
            font-weight: 700;
            color: var(--text-primary);
        }

        td {
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            color: var(--text-secondary);
        }

        tr:hover td {
            background: rgba(255, 255, 255, 0.03);
        }

        /* Diagram */
        .diagram {
            background: var(--bg-code);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 3rem;
            margin: 2rem 0;
            text-align: center;
        }

        .tree-node {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 700;
            margin: 0.25rem;
        }

        .tree-node.violet { background: linear-gradient(135deg, var(--violet), var(--fuchsia)); color: #000; }
        .tree-node.cyan { background: linear-gradient(135deg, var(--cyan), var(--emerald)); color: #000; }
        .tree-node.amber { background: linear-gradient(135deg, var(--amber), var(--orange)); color: #000; }
        .tree-node.emerald { background: linear-gradient(135deg, var(--emerald), var(--cyan)); color: #000; }
        .tree-node.rose { background: linear-gradient(135deg, var(--rose), var(--fuchsia)); color: #000; }

        /* Scenario cards */
        .scenario-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        @media (max-width: 1024px) {
            .scenario-grid {
                grid-template-columns: 1fr;
            }
        }

        .scenario-card {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .scenario-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
        }

        .scenario-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            margin-bottom: 1rem;
        }

        .scenario-card.ecommerce .scenario-icon { background: linear-gradient(135deg, var(--violet), var(--fuchsia)); }
        .scenario-card.healthcare .scenario-icon { background: linear-gradient(135deg, var(--emerald), var(--cyan)); }
        .scenario-card.finance .scenario-icon { background: linear-gradient(135deg, var(--amber), var(--orange)); }
        .scenario-card.logistics .scenario-icon { background: linear-gradient(135deg, var(--cyan), var(--violet)); }

        .scenario-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .scenario-card.ecommerce .scenario-title { color: var(--violet); }
        .scenario-card.healthcare .scenario-title { color: var(--emerald); }
        .scenario-card.finance .scenario-title { color: var(--amber); }
        .scenario-card.logistics .scenario-title { color: var(--cyan); }

        /* Impact box */
        .impact-box {
            background: linear-gradient(135deg, var(--rose), var(--fuchsia));
            border-radius: 16px;
            padding: 1.25rem 1.5rem;
            margin-top: 1rem;
            color: #000;
            font-weight: 600;
        }

        /* Highlight text */
        .text-amber { color: var(--amber); }
        .text-rose { color: var(--rose); }
        .text-emerald { color: var(--emerald); }
        .text-cyan { color: var(--cyan); }
        .text-violet { color: var(--violet); }

        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-dark) 100%);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2.5rem 0;
            margin-top: 4rem;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .footer-badge {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            font-size: 0.85rem;
            color: var(--text-muted);
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">üìä</div>
                <div>
                    <h1>Array Flattening Explained</h1>
                    <p class="subtitle">Why bracket preservation prevents data corruption in your ETL pipelines</p>
                </div>
            </div>
        </div>
    </header>

    <main>
        <!-- Section 1: Real-World Impact -->
        <section id="impact">
            <div class="container">
                <h2 class="amber"><span class="icon">üåç</span> Real-World Business Impact</h2>
                <p>See how bracket removal causes actual business problems across different industries.</p>

                <div class="scenario-grid">
                    <!-- E-Commerce -->
                    <div class="scenario-card ecommerce">
                        <div class="scenario-icon">üõí</div>
                        <div class="scenario-title">E-Commerce Order System</div>
                        <p>Customer orders multiple products, each with color variants.</p>
                        
                        <div style="background: var(--bg-code); border-radius: 12px; padding: 1rem; margin: 1rem 0; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;">
                            <div style="color: var(--text-muted); margin-bottom: 0.5rem;">// Flattened correctly:</div>
                            <div style="color: var(--emerald);">items_color: "[[Red, Blue], [Black]]"</div>
                            <div style="color: var(--text-muted); margin: 0.75rem 0 0.5rem;">// After "simplification":</div>
                            <div style="color: var(--rose);">items_color: "[Red, Blue, Black]"</div>
                        </div>
                        
                        <div class="impact-box">
                            üí∞ Warehouse ships wrong colors ‚Üí 340% increase in returns
                        </div>
                    </div>

                    <!-- Healthcare -->
                    <div class="scenario-card healthcare">
                        <div class="scenario-icon">üè•</div>
                        <div class="scenario-title">Patient Medical Records</div>
                        <p>Patient has multiple visits, each with different prescriptions.</p>
                        
                        <div style="background: var(--bg-code); border-radius: 12px; padding: 1rem; margin: 1rem 0; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;">
                            <div style="color: var(--text-muted); margin-bottom: 0.5rem;">// Flattened correctly:</div>
                            <div style="color: var(--emerald);">visits_drug: "[["Aspirin, 81mg"], [Metformin]]"</div>
                            <div style="color: var(--text-muted); margin: 0.75rem 0 0.5rem;">// After "simplification":</div>
                            <div style="color: var(--rose);">visits_drug: "[Aspirin, 81mg, Metformin]"</div>
                        </div>
                        
                        <div class="impact-box">
                            üö® System shows 3 drugs instead of 2 ‚Üí Potential dosing errors
                        </div>
                    </div>

                    <!-- Finance -->
                    <div class="scenario-card finance">
                        <div class="scenario-icon">üìà</div>
                        <div class="scenario-title">Investment Portfolio</div>
                        <p>Client has retirement and brokerage accounts with different holdings.</p>
                        
                        <div style="background: var(--bg-code); border-radius: 12px; padding: 1rem; margin: 1rem 0; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;">
                            <div style="color: var(--text-muted); margin-bottom: 0.5rem;">// Flattened correctly:</div>
                            <div style="color: var(--emerald);">accounts_ticker: "[[AAPL, MSFT], [GOOGL]]"</div>
                            <div style="color: var(--text-muted); margin: 0.75rem 0 0.5rem;">// After "simplification":</div>
                            <div style="color: var(--rose);">accounts_ticker: "[AAPL, MSFT, GOOGL]"</div>
                        </div>
                        
                        <div class="impact-box">
                            ‚öñÔ∏è Tax reporting shows wrong allocations ‚Üí IRS compliance issues
                        </div>
                    </div>

                    <!-- Logistics -->
                    <div class="scenario-card logistics">
                        <div class="scenario-icon">üöö</div>
                        <div class="scenario-title">Shipping & Logistics</div>
                        <p>Shipment has multiple containers, each with package manifests.</p>
                        
                        <div style="background: var(--bg-code); border-radius: 12px; padding: 1rem; margin: 1rem 0; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;">
                            <div style="color: var(--text-muted); margin-bottom: 0.5rem;">// Flattened correctly:</div>
                            <div style="color: var(--emerald);">containers_weight: "[["5.2 lbs"], ["3.1 lbs"]]"</div>
                            <div style="color: var(--text-muted); margin: 0.75rem 0 0.5rem;">// After "simplification":</div>
                            <div style="color: var(--rose);">containers_weight: "[5.2 lbs, 3.1 lbs]"</div>
                        </div>
                        
                        <div class="impact-box">
                            üì¶ Container weights miscalculated ‚Üí Overcharges or safety violations
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: The Comma Crisis -->
        <section id="comma">
            <div class="container">
                <h2 class="rose"><span class="icon">üí•</span> The "Comma in Your Data" Crisis</h2>
                <p>When your data contains commas, simple comma-separation becomes impossible.</p>

                <div class="card gradient-rose">
                    <h3 style="color: var(--rose); margin-top: 0;">The Fundamental Problem</h3>
                    
                    <div class="grid-3" style="margin: 2rem 0;">
                        <div style="text-align: center;">
                            <div style="background: var(--bg-code); border-radius: 16px; padding: 1.5rem; margin-bottom: 1rem;">
                                <div style="color: var(--text-muted); font-size: 0.8rem; margin-bottom: 0.5rem; text-transform: uppercase;">Original Array</div>
                                <div style="font-family: 'JetBrains Mono'; font-size: 1.1rem; color: var(--emerald);">["Smith, John", "Doe"]</div>
                            </div>
                            <span class="badge emerald">2 elements</span>
                        </div>
                        
                        <div style="display: flex; align-items: center; justify-content: center;">
                            <span style="font-size: 3rem; color: var(--rose);">‚Üí</span>
                        </div>
                        
                        <div style="text-align: center;">
                            <div style="background: var(--bg-code); border-radius: 16px; padding: 1.5rem; margin-bottom: 1rem;">
                                <div style="color: var(--text-muted); font-size: 0.8rem; margin-bottom: 0.5rem; text-transform: uppercase;">Comma-Separated</div>
                                <div style="font-family: 'JetBrains Mono'; font-size: 1.1rem; color: var(--rose);">Smith, John, Doe</div>
                            </div>
                            <span class="badge rose">2 or 3 elements? ü§∑</span>
                        </div>
                    </div>

                    <h3 style="color: var(--amber);">Given "Smith, John, Doe" ‚Äî Which was the original?</h3>
                    
                    <div class="grid-4" style="margin: 1.5rem 0;">
                        <div style="background: var(--bg-code); border-radius: 12px; padding: 1rem; text-align: center;">
                            <div style="font-family: 'JetBrains Mono'; font-size: 0.9rem; color: var(--text-primary);">["Smith, John", "Doe"]</div>
                            <div style="color: var(--amber); font-size: 0.8rem; margin-top: 0.5rem;">2 elements</div>
                        </div>
                        <div style="background: var(--bg-code); border-radius: 12px; padding: 1rem; text-align: center;">
                            <div style="font-family: 'JetBrains Mono'; font-size: 0.9rem; color: var(--text-primary);">["Smith", "John", "Doe"]</div>
                            <div style="color: var(--amber); font-size: 0.8rem; margin-top: 0.5rem;">3 elements</div>
                        </div>
                        <div style="background: var(--bg-code); border-radius: 12px; padding: 1rem; text-align: center;">
                            <div style="font-family: 'JetBrains Mono'; font-size: 0.9rem; color: var(--text-primary);">["Smith, John, Doe"]</div>
                            <div style="color: var(--amber); font-size: 0.8rem; margin-top: 0.5rem;">1 element</div>
                        </div>
                        <div style="background: var(--bg-code); border-radius: 12px; padding: 1rem; text-align: center;">
                            <div style="font-family: 'JetBrains Mono'; font-size: 0.9rem; color: var(--text-primary);">["Smith", "John, Doe"]</div>
                            <div style="color: var(--amber); font-size: 0.8rem; margin-top: 0.5rem;">2 elements</div>
                        </div>
                    </div>

                    <div class="alert danger">
                        <div class="alert-icon">ü§∑</div>
                        <div class="alert-content">
                            <div class="alert-title">ALL are valid interpretations!</div>
                            <p style="margin: 0;">The data has become <strong>permanently unrecoverable</strong>. No algorithm can determine the original structure.</p>
                        </div>
                    </div>
                </div>

                <h3>Common Real-World Data with Commas</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Data Type</th>
                            <th>Example Original</th>
                            <th>After Comma-Sep</th>
                            <th>Problem</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>üíµ Currency</td>
                            <td><code>["$1,234.56", "$789"]</code></td>
                            <td><code>$1,234.56,$789</code></td>
                            <td class="text-rose">Is $1 a value? Is 234.56 separate?</td>
                        </tr>
                        <tr>
                            <td>üìç Addresses</td>
                            <td><code>["123 Main St, NYC", "456 Oak"]</code></td>
                            <td><code>123 Main St, NYC, 456 Oak</code></td>
                            <td class="text-rose">3 addresses or 2?</td>
                        </tr>
                        <tr>
                            <td>üìÖ Dates</td>
                            <td><code>["Jan 1, 2024", "Feb 15, 2024"]</code></td>
                            <td><code>Jan 1, 2024, Feb 15, 2024</code></td>
                            <td class="text-rose">4 date parts or 2 dates?</td>
                        </tr>
                        <tr>
                            <td>üè¢ Company Names</td>
                            <td><code>["Acme, Inc.", "Beta LLC"]</code></td>
                            <td><code>Acme, Inc., Beta LLC</code></td>
                            <td class="text-rose">3 companies or 2?</td>
                        </tr>
                        <tr>
                            <td>üíä Drug Names</td>
                            <td><code>["Aspirin, 81mg", "Metformin"]</code></td>
                            <td><code>Aspirin, 81mg, Metformin</code></td>
                            <td class="text-rose">Is 81mg a separate drug?</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Section 3: Anatomy of Brackets -->
        <section id="anatomy">
            <div class="container">
                <h2 class="cyan"><span class="icon">üî¨</span> Anatomy of Nested Brackets</h2>
                <p>Understanding what each bracket level represents in your flattened data.</p>

                <div class="diagram">
                    <div style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 2rem; text-transform: uppercase; letter-spacing: 0.1em;">
                        E-Commerce Order Hierarchy
                    </div>
                    
                    <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                        <span class="tree-node violet">üì¶ Order #12345</span>
                        <div style="width: 2px; height: 30px; background: linear-gradient(to bottom, var(--violet), var(--cyan));"></div>
                        <span class="tree-node cyan">products[ ]</span>
                        
                        <div style="display: flex; gap: 120px; margin-top: 0.5rem;">
                            <div style="width: 2px; height: 30px; background: var(--cyan);"></div>
                            <div style="width: 2px; height: 30px; background: var(--cyan);"></div>
                        </div>
                        
                        <div style="display: flex; gap: 60px;">
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                                <span class="tree-node amber">üñ•Ô∏è Laptop Pro</span>
                                <div style="color: var(--amber); font-size: 0.8rem;">variants[ ]</div>
                                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; justify-content: center;">
                                    <span style="padding: 0.4rem 0.8rem; background: rgba(251, 191, 36, 0.2); border-radius: 8px; font-size: 0.8rem; color: var(--amber);">Space Gray</span>
                                    <span style="padding: 0.4rem 0.8rem; background: rgba(251, 191, 36, 0.2); border-radius: 8px; font-size: 0.8rem; color: var(--amber);">Silver</span>
                                    <span style="padding: 0.4rem 0.8rem; background: rgba(251, 191, 36, 0.2); border-radius: 8px; font-size: 0.8rem; color: var(--amber);">Gold</span>
                                </div>
                            </div>
                            
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                                <span class="tree-node emerald">üîå USB Hub</span>
                                <div style="color: var(--emerald); font-size: 0.8rem;">variants[ ]</div>
                                <div style="display: flex; gap: 0.5rem;">
                                    <span style="padding: 0.4rem 0.8rem; background: rgba(52, 211, 153, 0.2); border-radius: 8px; font-size: 0.8rem; color: var(--emerald);">Black</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="comparison">
                    <div class="comparison-box correct">
                        <div class="comparison-header">‚úÖ Correct: With All Brackets</div>
                        <pre style="margin: 1rem 0;"><code style="color: var(--emerald);">products_variants_color: "[[Space Gray, Silver, Gold], [Black]]"</code></pre>
                        
                        <div style="margin-top: 1rem; display: flex; flex-direction: column; gap: 0.5rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="width: 16px; height: 16px; border-radius: 4px; background: var(--violet);"></span>
                                <span style="color: var(--text-secondary);">Outer [ ] = products array (2 products)</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="width: 16px; height: 16px; border-radius: 4px; background: var(--amber);"></span>
                                <span style="color: var(--text-secondary);">First inner [Space Gray, Silver, Gold] = Laptop's 3 variants</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="width: 16px; height: 16px; border-radius: 4px; background: var(--emerald);"></span>
                                <span style="color: var(--text-secondary);">Second inner [Black] = USB Hub's 1 variant</span>
                            </div>
                        </div>
                    </div>

                    <div class="comparison-box wrong">
                        <div class="comparison-header">‚ùå Wrong: Outer Brackets Removed</div>
                        <pre style="margin: 1rem 0;"><code style="color: var(--rose);">products_variants_color: "[Space Gray, Silver, Gold, Black]"</code></pre>
                        
                        <div style="margin-top: 1rem; display: flex; flex-direction: column; gap: 0.5rem; color: var(--rose);">
                            <div>‚ùå Lost: Which colors belong to which product</div>
                            <div>‚ùå Lost: Laptop had 3 options, USB Hub had 1</div>
                            <div>‚ùå System thinks: 1 product with 4 color variants</div>
                            <div>‚ùå <strong>Data structure is UNRECOVERABLE</strong></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Business Objection -->
        <section id="business">
            <div class="container">
                <h2 class="violet"><span class="icon">üíº</span> Addressing Business Objections</h2>
                
                <div class="card gradient-violet">
                    <h3 style="margin-top: 0; color: var(--violet);">The Common Request</h3>
                    <blockquote style="border-left: 4px solid var(--violet); padding-left: 1.5rem; margin: 1.5rem 0; font-style: italic; color: var(--text-secondary); font-size: 1.2rem;">
                        "If the data is <code>[[my number], [his number]]</code>, why can't we simplify to <code>[my number], [his number]</code>? And we don't want quotes either!"
                    </blockquote>
                </div>

                <h3>Why They Look "The Same" But Aren't</h3>
                
                <div class="comparison">
                    <div class="comparison-box correct">
                        <div class="comparison-header">Format A: <code>[[a], [b, c]]</code></div>
                        <p style="color: var(--emerald); font-weight: 600;">Clear semantics: An array containing 2 arrays</p>
                        <ul style="color: var(--text-secondary); list-style: none; padding: 0; margin-top: 1rem;">
                            <li style="margin: 0.5rem 0;">‚úì Unambiguous: exactly 2 inner arrays</li>
                            <li style="margin: 0.5rem 0;">‚úì First inner has 1 element</li>
                            <li style="margin: 0.5rem 0;">‚úì Second inner has 2 elements</li>
                            <li style="margin: 0.5rem 0;">‚úì Parser knows this is a nested structure</li>
                        </ul>
                    </div>
                    
                    <div class="comparison-box wrong">
                        <div class="comparison-header">Format B: <code>[a], [b, c]</code></div>
                        <p style="color: var(--rose); font-weight: 600;">Ambiguous semantics: Could mean multiple things</p>
                        <ul style="color: var(--text-secondary); list-style: none; padding: 0; margin-top: 1rem;">
                            <li style="margin: 0.5rem 0;">? Could be 2 separate array values in CSV</li>
                            <li style="margin: 0.5rem 0;">? Could be a single string containing brackets</li>
                            <li style="margin: 0.5rem 0;">? Could be display formatting, not data</li>
                            <li style="margin: 0.5rem 0;">? Parser has no signal this is nested</li>
                        </ul>
                    </div>
                </div>

                <div class="alert warning">
                    <div class="alert-icon">üí°</div>
                    <div class="alert-content">
                        <div class="alert-title">The Analogy That Works</div>
                        <p style="margin: 0;">Removing brackets is like removing commas from a sentence. Compare:</p>
                        <div style="margin-top: 1rem; display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div style="background: var(--bg-code); padding: 1rem; border-radius: 12px;">
                                <div style="color: var(--emerald);">"Let's eat, Grandma!"</div>
                                <div style="color: var(--text-muted); font-size: 0.85rem; margin-top: 0.5rem;">Inviting grandma to eat</div>
                            </div>
                            <div style="background: var(--bg-code); padding: 1rem; border-radius: 12px;">
                                <div style="color: var(--rose);">"Let's eat Grandma!"</div>
                                <div style="color: var(--text-muted); font-size: 0.85rem; margin-top: 0.5rem;">Cannibalism üò±</div>
                            </div>
                        </div>
                        <p style="margin: 1rem 0 0 0; color: var(--amber);">The brackets are punctuation that changes meaning. They're not "extra" ‚Äî they're essential.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: Solutions -->
        <section id="solutions">
            <div class="container">
                <h2 class="emerald"><span class="icon">‚ú®</span> Solutions That Actually Work</h2>

                <div class="grid-2">
                    <div class="card gradient-emerald">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                            <span class="badge emerald">‚≠ê RECOMMENDED</span>
                        </div>
                        <h3 style="margin-top: 1rem; color: var(--emerald);">Keep Full Bracket Structure</h3>
                        <pre><code style="color: var(--emerald);">[[value1, value2], [value3]]</code></pre>
                        
                        <div style="margin-top: 1rem; display: flex; flex-direction: column; gap: 0.5rem;">
                            <div class="text-emerald">‚úÖ 100% reconstructable</div>
                            <div class="text-emerald">‚úÖ Handles ANY data content</div>
                            <div class="text-emerald">‚úÖ Zero data loss risk</div>
                            <div class="text-emerald">‚úÖ Works in all edge cases</div>
                        </div>
                        
                        <div style="background: var(--bg-code); border-radius: 12px; padding: 1rem; margin-top: 1rem;">
                            <div style="color: var(--amber); font-size: 0.9rem; font-weight: 600;">üí° Business Talking Point:</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">
                                "The brackets are metadata that tells us which items belong together. Like paragraph breaks in a document ‚Äî you can't remove them and expect the document to still make sense."
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <span class="badge violet">ALTERNATIVE</span>
                        <h3 style="margin-top: 1rem; color: var(--cyan);">JSON Format with Quotes</h3>
                        <pre><code style="color: var(--cyan);">[["Smith, John", "Doe"], ["Jane"]]</code></pre>
                        
                        <div style="margin-top: 1rem; display: flex; flex-direction: column; gap: 0.5rem;">
                            <div class="text-emerald">‚úÖ Handles commas in data perfectly</div>
                            <div class="text-emerald">‚úÖ Industry standard format</div>
                            <div class="text-amber">‚ö†Ô∏è Business sees "extra quotes"</div>
                            <div class="text-amber">‚ö†Ô∏è Slightly larger storage</div>
                        </div>
                    </div>

                    <div class="card">
                        <span class="badge amber">PARTIAL FIX</span>
                        <h3 style="margin-top: 1rem; color: var(--amber);">Alternative Delimiter (Pipe)</h3>
                        <pre><code style="color: var(--amber);">value1|value2|value3</code></pre>
                        
                        <div style="margin-top: 1rem; display: flex; flex-direction: column; gap: 0.5rem;">
                            <div class="text-amber">‚ö†Ô∏è Only works if data has no pipes</div>
                            <div class="text-rose">‚ùå Still loses nesting structure</div>
                            <div class="text-rose">‚ùå Just shifts the problem to a different character</div>
                        </div>
                    </div>

                    <div class="card gradient-rose">
                        <span class="badge rose">‚ùå AVOID</span>
                        <h3 style="margin-top: 1rem; color: var(--rose);">Remove Brackets / Flatten</h3>
                        <pre><code style="color: var(--rose); text-decoration: line-through;">value1, value2, value3</code></pre>
                        
                        <div style="margin-top: 1rem; display: flex; flex-direction: column; gap: 0.5rem;">
                            <div class="text-rose">‚ùå Data becomes permanently unrecoverable</div>
                            <div class="text-rose">‚ùå Comma collision is inevitable</div>
                            <div class="text-rose">‚ùå Structure information completely lost</div>
                            <div class="text-rose">‚ùå Will cause production incidents</div>
                        </div>
                    </div>
                </div>

                <!-- Final Recommendation -->
                <div style="margin-top: 3rem; background: linear-gradient(135deg, var(--violet), var(--fuchsia), var(--rose)); padding: 3px; border-radius: 24px;">
                    <div style="background: var(--bg-dark); border-radius: 22px; padding: 2.5rem; text-align: center;">
                        <div style="font-size: 4rem; margin-bottom: 1rem;">üéØ</div>
                        <h3 style="font-size: 2rem; margin: 0 0 1rem 0; background: linear-gradient(135deg, var(--amber), var(--orange)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">The Bottom Line</h3>
                        <p style="color: var(--text-secondary); font-size: 1.2rem; max-width: 700px; margin: 0 auto 1.5rem;">
                            The brackets aren't "extra" ‚Äî they're <span style="color: var(--amber); font-weight: 700;">essential metadata</span> that preserves the relationship between data elements.
                            Removing them is like removing commas from a sentence and expecting it to still make sense.
                        </p>
                        <div style="display: inline-flex; align-items: center; gap: 0.75rem; background: linear-gradient(135deg, var(--emerald), var(--cyan)); padding: 1rem 2rem; border-radius: 100px; color: #000; font-weight: 700;">
                            <span>‚úÖ</span>
                            <span>Recommendation: Keep BRACKET_LIST format with full nesting</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div style="color: var(--text-muted);">
                    <code style="color: var(--amber);">io.github.pierce</code> ‚Äî MapFlattener & AvroReconstructor
                </div>
                <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                    <span class="footer-badge">JSON</span>
                    <span class="footer-badge">BRACKET_LIST</span>
                    <span class="footer-badge">COMMA_SEPARATED</span>
                    <span class="footer-badge">PIPE_SEPARATED</span>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>
